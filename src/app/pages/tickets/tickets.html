<div class="flex flex-col items-center bg-gray-100 min-h-screen w-full">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <h1 class="text-3xl font-bold mb-8 mt-4">–ë–∏–ª–µ—Ç—ã üé´</h1>

  <!-- –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ -->
  <div class="w-full max-w-7xl px-6 mb-6 flex items-center relative">
    <!-- –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ -->
    <div class="relative flex-1">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –±–∏–ª–µ—Ç–∞"
        class="w-full border p-2 rounded text-base pr-10 focus:outline-none focus:ring-2 focus:ring-blue-300"
        (keyup.enter)="onSearch()"
      />

      <!-- –ö—Ä–µ—Å—Ç–∏–∫ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ -->
      <button
        *ngIf="searchTerm"
        (click)="clearSearch()"
        class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-700"
        aria-label="–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫"
      >
        ‚úï
      </button>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–π—Ç–∏" -->
    <button
      (click)="onSearch()"
      class="ml-2 bg-blue-200 text-blue-800 px-4 py-2 rounded hover:bg-blue-300 transition"
    >
      –ù–∞–π—Ç–∏
    </button>
  </div>
  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <div class="flex w-full max-w-7xl gap-10 px-6">
    <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ ‚Äî —Ñ–æ—Ä–º–∞, –æ—Å—Ç–∞—ë—Ç—Å—è —Å–≤–µ—Ä—Ö—É -->
    <div class="lg:w-1/3 flex-shrink-0">
      <div class="bg-white rounded-2xl shadow-md p-6 w-full max-w-sm sticky top-6">
        <h2 class="text-xl font-semibold mb-4 text-center">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –±–∏–ª–µ—Ç</h2>

        <input
          type="text"
          [(ngModel)]="newTitle"
          placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –±–∏–ª–µ—Ç–∞"
          class="border p-2 w-full rounded mb-4 text-base"
        />

        <textarea
          [(ngModel)]="newDescription"
          placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –±–∏–ª–µ—Ç–∞"
          class="border p-2 w-full rounded mb-4 text-base"
          rows="4"
        ></textarea>

        <select [(ngModel)]="newStatus" class="border p-2 w-full rounded mb-4 text-base">
          <option value="OPEN">OPEN</option>
          <option value="CLOSED">CLOSED</option>
        </select>

        <textarea
          [(ngModel)]="newMessage"
          placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"
          class="border p-2 w-full rounded mb-4 text-base"
          rows="2"
        ></textarea>

        <div class="flex justify-center">
          <button
            (click)="createTicket()"
            class="bg-blue-200 text-blue-800 px-4 py-2 text-base rounded hover:bg-blue-300 transition cursor-pointer"
          >
            –°–æ–∑–¥–∞—Ç—å –±–∏–ª–µ—Ç
          </button>
        </div>
      </div>
    </div>

    <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ ‚Äî –±–∏–ª–µ—Ç—ã -->
    <div class="lg:w-2/3 w-full overflow-y-auto max-h-[80vh]">
      <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
      <div *ngIf="loading" class="text-gray-500 mb-6 text-lg">–ó–∞–≥—Ä—É–∑–∫–∞ –±–∏–ª–µ—Ç–æ–≤...</div>

      <!-- –û—à–∏–±–∫–∞ -->
      <div *ngIf="error" class="text-red-500 mb-6 text-lg">
        {{ error }}
      </div>

      <!-- –ù–µ—Ç –±–∏–ª–µ—Ç–æ–≤ -->
      <div *ngIf="!loading && tickets.length === 0 && !error" class="text-gray-600 mb-6 text-lg">
        –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –±–∏–ª–µ—Ç–æ–≤
      </div>

      <!-- –°–ø–∏—Å–æ–∫ –±–∏–ª–µ—Ç–æ–≤ -->
      <app-tickets-list
        *ngIf="tickets.length > 0"
        [tickets]="tickets"
        (update)="onUpdateTicket($event)"
        (delete)="onDeleteTicket($event)"
      ></app-tickets-list>
    </div>
  </div>
</div>
